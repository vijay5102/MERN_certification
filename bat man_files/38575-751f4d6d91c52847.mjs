"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[38575],{17314:(e,t,i)=>{i.d(t,{Z:()=>u});var r,s,n=i(813653),o=i(861470),a=0,l=0;let u=function(e,t,i){var u=t&&i||0,d=t||Array(16),c=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:s;if(null==c||null==h){var p=e.random||(e.rng||n.Z)();null==c&&(c=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=s=(p[6]<<8|p[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),b=void 0!==e.nsecs?e.nsecs:l+1,f=m-a+(b-l)/1e4;if(f<0&&void 0===e.clockseq&&(h=h+1&16383),(f<0||m>a)&&void 0===e.nsecs&&(b=0),b>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=m,l=b,s=h;var v=((268435455&(m+=122192928e5))*1e4+b)%4294967296;d[u++]=v>>>24&255,d[u++]=v>>>16&255,d[u++]=v>>>8&255,d[u++]=255&v;var g=m/4294967296*1e4&268435455;d[u++]=g>>>8&255,d[u++]=255&g,d[u++]=g>>>24&15|16,d[u++]=g>>>16&255,d[u++]=h>>>8|128,d[u++]=255&h;for(var y=0;y<6;++y)d[u+y]=c[y];return t||(0,o.Z)(d)}},541841:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(667294),s=i(973935);function n(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends r.Component{constructor(...e){super(...e),n(this,"observer",null),n(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=s.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return r.Children.only(this.props.children)}}let a=o},59545:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class n extends r.Component{constructor(...e){super(...e),s(this,"ref",(0,r.createRef)()),s(this,"observer",null),s(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){null!==this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let o=n},579814:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(372085),s=i(624797);let n=(e=()=>{})=>{let t=(0,s.mB)(window.location.search),{invite_code:i}=t;if(!i){e(t);return}let n=encodeURIComponent(encodeURIComponent(i));(0,r.Z)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:n}})}},627408:(e,t,i)=>{i.d(t,{Z:()=>_});var r=i(667294),s=i(883119),n=i(541841),o=i(901855),a=i(59545),l=i(340523),u=i(5859),d=i(520893),c=i(503325);let{Provider:h,useMaybeHook:p}=(0,i(342513).Z)("timeSpentContext");var m=i(28449),b=i(19447),f=i(785893);function v(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends r.Component{constructor(e){super(e),v(this,"componentWillUnmount",()=>{this.unregisterComponent()}),v(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:i,objectId:r,timeSpentContext:s,view:n,viewParameter:o}=this.props;return{view:n||s?.view,viewParameter:o||s?.viewParameter,component:t||s?.component,element:i,objectId:r||s?.objectId,clientTrackingParams:e||s?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),v(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),v(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),v(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),v(this,"getTimedPair",()=>this.state.timedPair),v(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),v(this,"isRegistered",!1),v(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),v(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),v(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:i,left:r,right:s,top:n}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===i&&0===r&&0===s&&0===n?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new c.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,d.Z)(e.auxData,this.props.auxData)&&(0,d.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverExpEnabled:t}=this.props;return t?(0,f.jsx)(h,{value:this.getContext(),children:(0,f.jsx)(a.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>(0,f.jsx)(s.xu,{ref:t,children:r.Children.only(e)})})}):(0,f.jsx)(h,{value:this.getContext(),children:(0,f.jsx)(n.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:r.Children.only(e)})})}}function y(e){let t=(0,o.Hv)(),i=p(),s=(0,m.Z)(),n=(0,b.H0)(),{requestIdentifier:a="",isAuthenticated:d}=(0,u.B)(),c={app_instance_id:a.slice(0,8),...e.auxData??{}},{checkExperiment:h}=(0,l.F)(),v=h(d?"web_intersection_observer_migration_auth":"web_intersection_observer_migration_unauth").anyEnabled;return(0,r.useEffect)(()=>{s?.setHistoryStackContext(t)},[t,s]),(0,r.useEffect)(()=>{s?.setPins(n??{})},[n,s]),s?(0,f.jsx)(g,{...e,auxData:c,intersectionObserverExpEnabled:v,timeSpentContext:i,timeSpentManager:s,children:e.children}):e.children}y.displayName="TimeSpent";let _=y},503325:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(172045),s=i(17314);function n(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let o="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),a=class{constructor(e){n(this,"start",()=>(this.startTime=o(),this.startTime)),n(this,"end",()=>(this.endTime=o(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,r.Z)()}catch(e){this.uuid=(0,s.Z)()}e&&Object.assign(this,e)}}},28449:(e,t,i)=>{i.d(t,{$:()=>r,Z:()=>n});let{Provider:r,useMaybeHook:s}=(0,i(342513).Z)("TimeSpentManagerContext"),n=s},446653:(e,t,i)=>{i.d(t,{r:()=>_,K:()=>y});var r=i(667294),s=i(342513),n=i(340523),o=i(757640),a=i(149722),l=i(998577),u=i(573810),d=i(325362);let c=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,d.Z)(i)]=e[i]:t[(0,d.Z)(i)]=c(e[i]));return t},h=(e,t)=>{let i=[];for(let r in e)r!==t&&i.push({id:r,...c(e[r])});let r=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),s=new Map;for(let e of r)s.set(e.id,e);return s},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},b=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:s,disableProfileChanger:n,headerVisible:o}=i,a=(0,r.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]);return{changeProfile:a,toggleORBACVisibility:(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!s})},[t,e,s]),toggleDisableProfileChanger:(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!n})},[t,e,n]),toggleHeaderVisibility:(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!o})},[t,e,o])}},f=e=>{let[t,i]=(0,r.useReducer)(m,p),s=b({dispatch:i,isEnabled:e,state:t}),{activeProfile:n,orbacVisibility:o}=t;return(0,r.useEffect)(()=>{let e=(0,u.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(()=>{let e=(0,u.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(()=>{(0,u.Nh)("orbacVisibility",o)},[o]),(0,r.useEffect)(()=>{(0,u.Nh)("orbacActiveProfile",n)},[n]),{state:t,actions:s,receiveProfiles:(0,r.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:h(e,t)})},[i])}};var v=i(785893);let{Provider:g,useMaybeHook:y}=(0,s.Z)("RoleBasedAccessControlContext"),_=({children:e})=>{let t;let{checkExperiment:i}=(0,n.F)(),s=(0,a.Z)(),u=!!(s.isAuth&&s.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),{state:d,actions:c,receiveProfiles:h}=f(u),{activeProfile:p,headerVisible:m,profiles:b=[]}=d,y=b?Array.from(b.values()):[],_=(0,l.Z)(y),C=!!s.isAuth&&y.length>0&&_,w=s.isAuth?s.id:"",E=s.isAuth?s.username:"",{changeProfile:P,toggleORBACVisibility:A,toggleDisableProfileChanger:I,toggleHeaderVisibility:S}=c;(0,r.useEffect)(()=>{if(u){if("string"==typeof _){P(_);return}p||P(w)}},[_,w,u,P,p]),(0,r.useEffect)(()=>{u&&(C&&!m&&S(!0),!C&&m&&S(!1))},[S,C,u,m,b]);let{data:T}=(0,o.Z)(u?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),O=T?.profiles;s&&s.isAuth&&d.activeProfile===s.id?t={id:s.id,permissions:["OWNER"],user:{username:E,businessName:s.fullName,imgUrl:s.imageSmallUrl}}:p&&d.profiles&&(t=d.profiles.get(p)),(0,r.useEffect)(()=>{O&&h(O,w)},[h,O,w]);let L=d.profiles?Array.from(d.profiles.values()):[];return(0,v.jsx)(g,{value:{profiles:L,headerVisible:d.headerVisible,activeProfile:t,changeProfile:P,toggleORBACVisibility:A,toggleDisableProfileChanger:I,toggleHeaderVisibility:S},children:e})}},785059:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(340523),s=i(446653),n=i(998577);let o=()=>{let{checkExperiment:e}=(0,r.F)(),t=(0,s.K)(),{activeProfile:i}=t||{},o=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,n.Z)(t?.profiles||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return o&&(!l||a)&&i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},998577:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(616550),s=i(741983),n=i(340523),o=i(149722),a=i(19447);let l=e=>{let t=(0,r.TH)(),i=(0,o.Z)(),l=(0,a.S6)(),{anyEnabled:u}=(0,n.F)().checkExperiment("web_m10n_business_access_orbac_www"),d=(0,r.$B)("/:username"),c=d?.params?.username,h=(0,r.$B)("/pin/:id"),p=!!h?.params?.id&&l(h.params.id)?.pinner?.id;if((0,s.ej)(t))return!1;if((0,s.RU)(t))return!0;if((0,s.mY)(t))return u;let m=e.concat(i.isAuth?{user:{username:i.username},id:i.id}:{}).find(e=>{let{user:t={},id:i}=e||{},{username:r}=t;return(!!r&&!!c||!!p&&!!i)&&(r===c||p===i)});return!!m&&m.id}},199677:(e,t,i)=>{i.d(t,{D3:()=>c,DX:()=>u,Fk:()=>r,KY:()=>h,Ms:()=>s,N1:()=>p,_P:()=>l,gJ:()=>n,lJ:()=>a,nl:()=>o,q6:()=>d});let r=(e,t)=>{let i=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(i=t.user.businessName),i},s=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},n=(e,t)=>{let i=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(i=t.user.imgUrl),i},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,u=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,d=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),c=(e,t,i)=>!!(d(e,t,i)||e&&e.isAuth&&t===e.id),h=(e,t,i)=>c(e,t&&t.owner&&t.owner.id||"",i);function p(e,t,i){return c(e,t?t.id:"",i)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/38575-751f4d6d91c52847.mjs.map